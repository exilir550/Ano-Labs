<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Create Collection | Ano Labs</title>
  <link href="./src/output.css" rel="stylesheet" />
  <link rel="shortcut icon" href="/media/favicon-16x16.png" type="image/x-icon">
  <script type="module" src="firebase-setup.js"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center justify-center px-4 py-10">

 <!-- Reusable Navbar -->
<div id="navbar-placeholder"></div>


  <h1 class="text-3xl sm:text-4xl font-bold text-amber-400 mb-6 mt-12 text-center">
  Create New NFT Collection
</h1>

<!-- Responsive Wrapper -->
<div class="px-4 w-full flex justify-center">
  <div class="w-full max-w-xl bg-gray-800 p-6 rounded-xl shadow-xl space-y-4">
    <input type="text" id="projectName" placeholder="Project Name"
      class="w-full px-4 py-2 bg-gray-700 text-white border border-gray-600 rounded" />
    <input type="text" id="projectSymbol" placeholder="Symbol (e.g. ANFT)"
      class="w-full px-4 py-2 bg-gray-700 text-white border border-gray-600 rounded" />
    <textarea id="projectDescription" placeholder="Project Description" rows="3"
      class="w-full px-4 py-2 bg-gray-700 text-white border border-gray-600 rounded"></textarea>
    <input type="number" id="priceInANO" placeholder="Price in ANO"
      class="w-full px-4 py-2 bg-gray-700 text-white border border-gray-600 rounded" />
    <input type="number" id="maxSupply" placeholder="Edition Size"
      class="w-full px-4 py-2 bg-gray-700 text-white border border-gray-600 rounded" />
    <input type="number" id="maxPerWallet" placeholder="Max NFTs Per Wallet"
      class="w-full px-4 py-2 bg-gray-700 text-white border border-gray-600 rounded" />

    <label class="block text-sm font-medium text-gray-300">Upload Collection Image</label>
    <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4">
      <label class="bg-amber-400 text-black px-4 py-2 rounded cursor-pointer hover:bg-amber-300 transition">
        Browse Image
        <input type="file" id="collectionImage" accept="image/*" class="hidden" />
      </label>
      <span id="fileName" class="text-sm text-gray-400 truncate max-w-full sm:max-w-[150px]">
        No file chosen
      </span>
    </div>
    <img id="previewImg" src="" class="w-32 h-32 object-cover rounded-lg border border-gray-700 hidden mt-2" />

    <label for="aiPrompt" class="block text-sm font-medium text-gray-300 mt-4">Or Generate with AI</label>
    <div class="flex flex-col sm:flex-row gap-2">
      <input type="text" id="aiPrompt" placeholder="e.g. futuristic wolf"
        class="flex-1 px-4 py-2 bg-gray-700 text-white border border-gray-600 rounded" />
      <button id="generateAI"
        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-400 transition">🎨 Generate</button>
    </div>

    <button id="deployBtn"
      class="w-full bg-green-500 text-black font-bold py-2 px-4 rounded hover:bg-green-400 transition mt-6">
      Deploy Collection
    </button>

    <p id="status" class="text-sm text-center text-green-400 mt-2"></p>
    <p id="walletAddress" class="mt-4 text-sm text-gray-400"></p>
  </div>
</div>


   <!-- Scripts -->
  <script>
  fetch("navbar.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("navbar-placeholder").innerHTML = html;

      // Run hamburger + active link logic manually
      const currentPath = location.pathname.split("/").pop().split("?")[0];
      document.querySelectorAll(".nav-link").forEach(link => {
        const page = link.getAttribute("data-page");
        if (page === currentPath) {
          link.classList.add("text-amber-400", "font-bold");
        }
      });

      const btn = document.getElementById("mobileMenuBtn");
      const menu = document.getElementById("mobileMenu");
      const icon = document.getElementById("hamburgerIcon");

      let isOpen = false;
      btn?.addEventListener("click", () => {
        menu?.classList.toggle("hidden");
        isOpen = !isOpen;
        icon.innerHTML = isOpen
          ? `<path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />`
          : `<path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />`;
      });

      // Then load wallet logic
      const script = document.createElement("script");
      script.src = "wallet-connect.js";
      document.body.appendChild(script);
    });
</script>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>

    document.getElementById("connectWalletBtn").addEventListener("click", async () => {
      if (!window.ethereum) return alert("MetaMask not found");
      try {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        window.signer = signer;
window.connected = true;

        const address = await signer.getAddress();
        connected = true;

        const connectBtn = document.getElementById("connectWalletBtn");
        connectBtn.innerText = `👤 ${address.slice(0, 6)}...${address.slice(-4)}`;
        connectBtn.disabled = true;
      } catch (err) {
        console.error("Wallet connect failed", err);
      }
    });
  </script>


  <script>
    const collectionImageInput = document.getElementById("collectionImage");
    const previewImg = document.getElementById("previewImg");
    const fileName = document.getElementById("fileName");
    const generateAI = document.getElementById("generateAI");
    const deployBtn = document.getElementById("deployBtn");
    const status = document.getElementById("status");

    let signer, connected = false;

    const contractABI = [
  {
    "inputs": [
      { "internalType": "string", "name": "name", "type": "string" },
      { "internalType": "string", "name": "symbol", "type": "string" },
      { "internalType": "address", "name": "_anoTokenAddress", "type": "address" },
      { "internalType": "address", "name": "initialOwner", "type": "address" },
      { "internalType": "string", "name": "_description", "type": "string" },
      { "internalType": "uint256", "name": "_priceInANO", "type": "uint256" },
      { "internalType": "uint256", "name": "_platformFeeInANO", "type": "uint256" },
      { "internalType": "uint256", "name": "_maxSupply", "type": "uint256" },
      { "internalType": "uint256", "name": "_maxPerWallet", "type": "uint256" },
      { "internalType": "address", "name": "_platformAddress", "type": "address" }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "anoTokenAddress",
    "outputs": [{ "internalType": "address", "name": "", "type": "address" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "description",
    "outputs": [{ "internalType": "string", "name": "", "type": "string" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "maxPerWallet",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "maxSupply",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "platformAddress",
    "outputs": [{ "internalType": "address", "name": "", "type": "address" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "platformFeeInANO",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "priceInANO",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "tokenCounter",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [{ "internalType": "uint256", "name": "amount", "type": "uint256" }],
    "name": "mintNFT",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [{ "internalType": "address", "name": "", "type": "address" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [{ "internalType": "string", "name": "uri", "type": "string" }],
    "name": "setBaseURI",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [{ "internalType": "uint256", "name": "tokenId", "type": "uint256" }],
    "name": "tokenURI",
    "outputs": [{ "internalType": "string", "name": "", "type": "string" }],
    "stateMutability": "view",
    "type": "function"
  }
];

    const bytecode = "608060405234801562000010575f80fd5b5060405162003afc38038062003afc8339818101604052810190620000369190620005fc565b868a8a815f908162000049919062000977565b5080600190816200005b919062000977565b5050505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603620000d1575f6040517f1e4fbdf7000000000000000000000000000000000000000000000000000000008152600401620000c8919062000a6c565b60405180910390fd5b620000e2816200031b60201b60201c565b505f73ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff160362000154576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200014b9062000ae5565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff1603620001c5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620001bc9062000b53565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160362000236576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200022d9062000bc1565b60405180910390fd5b87600e5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550856009908162000287919062000977565b5084600a8190555083600b8190555082600c8190555081600d8190555080600f5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505f60078190555060405180602001604052805f815250600890816200030a919062000977565b505050505050505050505062000be1565b5f60065f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508160065f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6200043f82620003f7565b810181811067ffffffffffffffff8211171562000461576200046062000407565b5b80604052505050565b5f62000475620003de565b905062000483828262000434565b919050565b5f67ffffffffffffffff821115620004a557620004a462000407565b5b620004b082620003f7565b9050602081019050919050565b5f5b83811015620004dc578082015181840152602081019050620004bf565b5f8484015250505050565b5f620004fd620004f78462000488565b6200046a565b9050828152602081018484840111156200051c576200051b620003f3565b5b62000529848285620004bd565b509392505050565b5f82601f830112620005485762000547620003ef565b5b81516200055a848260208601620004e7565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6200058e8262000563565b9050919050565b620005a08162000582565b8114620005ab575f80fd5b50565b5f81519050620005be8162000595565b92915050565b5f819050919050565b620005d881620005c4565b8114620005e3575f80fd5b50565b5f81519050620005f681620005cd565b92915050565b5f805f805f805f805f806101408b8d0312156200061e576200061d620003e7565b5b5f8b015167ffffffffffffffff8111156200063e576200063d620003eb565b5b6200064c8d828e0162000531565b9a505060208b015167ffffffffffffffff81111562000670576200066f620003eb565b5b6200067e8d828e0162000531565b9950506040620006918d828e01620005ae565b9850506060620006a48d828e01620005ae565b97505060808b015167ffffffffffffffff811115620006c857620006c7620003eb565b5b620006d68d828e0162000531565b96505060a0620006e98d828e01620005e6565b95505060c0620006fc8d828e01620005e6565b94505060e06200070f8d828e01620005e6565b935050610100620007238d828e01620005e6565b925050610120620007378d828e01620005ae565b9150509295989b9194979a5092959850565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806200079857607f821691505b602082108103620007ae57620007ad62000753565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f60088302620008127fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82620007d5565b6200081e8683620007d5565b95508019841693508086168417925050509392505050565b5f819050919050565b5f6200085f620008596200085384620005c4565b62000836565b620005c4565b9050919050565b5f819050919050565b6200087a836200083f565b62000892620008898262000866565b848454620007e1565b825550505050565b5f90565b620008a86200089a565b620008b58184846200086f565b505050565b5b81811015620008dc57620008d05f826200089e565b600181019050620008bb565b5050565b601f8211156200092b57620008f581620007b4565b6200090084620007c6565b8101602085101562000910578190505b620009286200091f85620007c6565b830182620008ba565b50505b505050565b5f82821c905092915050565b5f6200094d5f198460080262000930565b1980831691505092915050565b5f6200096783836200093c565b9150826002028217905092915050565b620009828262000749565b67ffffffffffffffff8111156200099e576200099d62000407565b5b620009aa825462000780565b620009b7828285620008e0565b5f60209050601f831160018114620009ed575f8415620009d8578287015190505b620009e485826200095a565b86555062000a53565b601f198416620009fd86620007b4565b5f5b8281101562000a2657848901518255600182019150602085019450602081019050620009ff565b8683101562000a46578489015162000a42601f8916826200093c565b8355505b6001600288020188555050505b505050505050565b62000a668162000582565b82525050565b5f60208201905062000a815f83018462000a5b565b92915050565b5f82825260208201905092915050565b7f496e76616c696420414e4f2061646472657373000000000000000000000000005f82015250565b5f62000acd60138362000a87565b915062000ada8262000a97565b602082019050919050565b5f6020820190508181035f83015262000afe8162000abf565b9050919050565b7f496e76616c69642063726561746f7220616464726573730000000000000000005f82015250565b5f62000b3b60178362000a87565b915062000b488262000b05565b602082019050919050565b5f6020820190508181035f83015262000b6c8162000b2d565b9050919050565b7f496e76616c696420706c6174666f726d206164647265737300000000000000005f82015250565b5f62000ba960188362000a87565b915062000bb68262000b73565b602082019050919050565b5f6020820190508181035f83015262000bda8162000b9b565b9050919050565b612f0d8062000bef5f395ff3fe608060405234801561000f575f80fd5b50600436106101c2575f3560e01c806392642744116100f7578063d547cfb711610095578063e985e9c51161006f578063e985e9c5146104ce578063f2fde38b146104fe578063f8d772ee1461051a578063fddcb5ea14610538576101c2565b8063d547cfb714610474578063d5abeb0114610492578063dbe55e56146104b0576101c2565b8063b88d4fde116100d1578063b88d4fde146103ec578063bd4f253f14610408578063c87b56dd14610426578063d082e38114610456576101c2565b8063926427441461039657806395d89b41146103b2578063a22cb465146103d0576101c2565b806345fe25a61161016457806370a082311161013e57806370a0823114610320578063715018a6146103505780637284e4161461035a5780638da5cb5b14610378576101c2565b806345fe25a6146102b657806355f804b3146102d45780636352211e146102f0576101c2565b8063095ea7b3116101a0578063095ea7b31461024457806323b872dd1461026057806342842e0e1461027c578063453c231014610298576101c2565b806301ffc9a7146101c657806306fdde03146101f6578063081812fc14610214575b5f80fd5b6101e060048036038101906101db9190611eec565b610568565b6040516101ed9190611f31565b60405180910390f35b6101fe610649565b60405161020b9190611fd4565b60405180910390f35b61022e60048036038101906102299190612027565b6106d8565b60405161023b9190612091565b60405180910390f35b61025e600480360381019061025991906120d4565b6106f3565b005b61027a60048036038101906102759190612112565b610709565b005b61029660048036038101906102919190612112565b610808565b005b6102a0610827565b6040516102ad9190612171565b60405180910390f35b6102be61082d565b6040516102cb9190612171565b60405180910390f35b6102ee60048036038101906102e991906122b6565b610833565b005b61030a60048036038101906103059190612027565b61084e565b6040516103179190612091565b60405180910390f35b61033a600480360381019061033591906122fd565b61085f565b6040516103479190612171565b60405180910390f35b610358610915565b005b610362610928565b60405161036f9190611fd4565b60405180910390f35b6103806109b4565b60405161038d9190612091565b60405180910390f35b6103b060048036038101906103ab9190612027565b6109dc565b005b6103ba610d82565b6040516103c79190611fd4565b60405180910390f35b6103ea60048036038101906103e59190612352565b610e12565b005b6104066004803603810190610401919061242e565b610e28565b005b610410610e4d565b60405161041d9190612171565b60405180910390f35b610440600480360381019061043b9190612027565b610e53565b60405161044d9190611fd4565b60405180910390f35b61045e610ecb565b60405161046b9190612171565b60405180910390f35b61047c610ed1565b6040516104899190611fd4565b60405180910390f35b61049a610f5d565b6040516104a79190612171565b60405180910390f35b6104b8610f63565b6040516104c59190612091565b60405180910390f35b6104e860048036038101906104e391906124ae565b610f88565b6040516104f59190611f31565b60405180910390f35b610518600480360381019061051391906122fd565b611016565b005b61052261109a565b60405161052f9190612091565b60405180910390f35b610552600480360381019061054d91906122fd565b6110bf565b60405161055f9190612171565b60405180910390f35b5f7f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061063257507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b806106425750610641826110d4565b5b9050919050565b60605f805461065790612519565b80601f016020809104026020016040519081016040528092919081815260200182805461068390612519565b80156106ce5780601f106106a5576101008083540402835291602001916106ce565b820191905f5260205f20905b8154815290600101906020018083116106b157829003601f168201915b5050505050905090565b5f6106e28261113d565b506106ec826111c3565b9050919050565b61070582826107006111fc565b611203565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610779575f6040517f64a0ae920000000000000000000000000000000000000000000000000000000081526004016107709190612091565b60405180910390fd5b5f61078c83836107876111fc565b611215565b90508373ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614610802578382826040517f64283d7b0000000000000000000000000000000000000000000000000000000081526004016107f993929190612549565b60405180910390fd5b50505050565b61082283838360405180602001604052805f815250610e28565b505050565b600d5481565b600b5481565b61083b611420565b806008908161084a919061271b565b5050565b5f6108588261113d565b9050919050565b5f8073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036108d0575f6040517f89c62b640000000000000000000000000000000000000000000000000000000081526004016108c79190612091565b60405180910390fd5b60035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b61091d611420565b6109265f6114a7565b565b6009805461093590612519565b80601f016020809104026020016040519081016040528092919081815260200182805461096190612519565b80156109ac5780601f10610983576101008083540402835291602001916109ac565b820191905f5260205f20905b81548152906001019060200180831161098f57829003601f168201915b505050505081565b5f60065f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b5f8111610a1e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a1590612834565b60405180910390fd5b600c5481600754610a2f919061287f565b1115610a70576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a67906128fc565b60405180910390fd5b600d548160105f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054610abc919061287f565b1115610afd576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610af490612964565b60405180910390fd5b5f600e5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505f82600a54610b319190612982565b90505f83600b54610b429190612982565b90508273ffffffffffffffffffffffffffffffffffffffff166323b872dd33610b696109b4565b856040518463ffffffff1660e01b8152600401610b88939291906129c3565b6020604051808303815f875af1158015610ba4573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610bc89190612a0c565b610c07576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bfe90612a81565b60405180910390fd5b8273ffffffffffffffffffffffffffffffffffffffff166323b872dd33600f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16846040518463ffffffff1660e01b8152600401610c65939291906129c3565b6020604051808303815f875af1158015610c81573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610ca59190612a0c565b610ce4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cdb90612ae9565b60405180910390fd5b5f5b84811015610d7b575f6007549050610cfe338261156a565b60075f815480929190610d1090612b07565b919050555060105f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f815480929190610d6290612b07565b9190505550508080610d7390612b07565b915050610ce6565b5050505050565b606060018054610d9190612519565b80601f0160208091040260200160405190810160405280929190818152602001828054610dbd90612519565b8015610e085780601f10610ddf57610100808354040283529160200191610e08565b820191905f5260205f20905b815481529060010190602001808311610deb57829003601f168201915b5050505050905090565b610e24610e1d6111fc565b8383611587565b5050565b610e33848484610709565b610e47610e3e6111fc565b858585856116f0565b50505050565b600a5481565b60606007548210610e99576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e9090612b98565b60405180910390fd5b6008610ea48361189c565b604051602001610eb5929190612cba565b6040516020818303038152906040529050919050565b60075481565b60088054610ede90612519565b80601f0160208091040260200160405190810160405280929190818152602001828054610f0a90612519565b8015610f555780601f10610f2c57610100808354040283529160200191610f55565b820191905f5260205f20905b815481529060010190602001808311610f3857829003601f168201915b505050505081565b600c5481565b600f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b5f60055f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f9054906101000a900460ff16905092915050565b61101e611420565b5f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff160361108e575f6040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016110859190612091565b60405180910390fd5b611097816114a7565b50565b600e5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6010602052805f5260405f205f915090505481565b5f7f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b5f80611148836119f5565b90505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036111ba57826040517f7e2732890000000000000000000000000000000000000000000000000000000081526004016111b19190612171565b60405180910390fd5b80915050919050565b5f60045f8381526020019081526020015f205f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b5f33905090565b6112108383836001611a2e565b505050565b5f80611220846119f5565b90505f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161461126157611260818486611bed565b5b5f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16146112ec576112a05f855f80611a2e565b600160035f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825403925050819055505b5f73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161461136b57600160035f8773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055505b8460025f8681526020019081526020015f205f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550838573ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4809150509392505050565b6114286111fc565b73ffffffffffffffffffffffffffffffffffffffff166114466109b4565b73ffffffffffffffffffffffffffffffffffffffff16146114a5576114696111fc565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161149c9190612091565b60405180910390fd5b565b5f60065f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508160065f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b611583828260405180602001604052805f815250611cb0565b5050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036115f757816040517f5b08ba180000000000000000000000000000000000000000000000000000000081526004016115ee9190612091565b60405180910390fd5b8060055f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f6101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516116e39190611f31565b60405180910390a3505050565b5f8373ffffffffffffffffffffffffffffffffffffffff163b1115611895578273ffffffffffffffffffffffffffffffffffffffff1663150b7a02868685856040518563ffffffff1660e01b815260040161174e9493929190612d3a565b6020604051808303815f875af192505050801561178957506040513d601f19601f820116820180604052508101906117869190612d98565b60015b61180a573d805f81146117b7576040519150601f19603f3d011682016040523d82523d5f602084013e6117bc565b606091505b505f81510361180257836040517f64a0ae920000000000000000000000000000000000000000000000000000000081526004016117f99190612091565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161461189357836040517f64a0ae9200000000000000000000000000000000000000000000000000000000815260040161188a9190612091565b60405180910390fd5b505b5050505050565b60605f82036118e2576040518060400160405280600181526020017f300000000000000000000000000000000000000000000000000000000000000081525090506119f0565b5f8290505f5b5f82146119115780806118fa90612b07565b915050600a8261190a9190612df0565b91506118e8565b5f8167ffffffffffffffff81111561192c5761192b612192565b5b6040519080825280601f01601f19166020018201604052801561195e5781602001600182028036833780820191505090505b5090505b5f85146119e9576001826119769190612e20565b9150600a856119859190612e53565b6030611991919061287f565b60f81b8183815181106119a7576119a6612e83565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690815f1a905350600a856119e29190612df0565b9450611962565b8093505050505b919050565b5f60025f8381526020019081526020015f205f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b8080611a6657505f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614155b15611b98575f611a758461113d565b90505f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614158015611adf57508273ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614155b8015611af25750611af08184610f88565b155b15611b3457826040517fa9fbf51f000000000000000000000000000000000000000000000000000000008152600401611b2b9190612091565b60405180910390fd5b8115611b9657838573ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45b505b8360045f8581526020019081526020015f205f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050505050565b611bf8838383611cd3565b611cab575f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603611c6c57806040517f7e273289000000000000000000000000000000000000000000000000000000008152600401611c639190612171565b60405180910390fd5b81816040517f177e802f000000000000000000000000000000000000000000000000000000008152600401611ca2929190612eb0565b60405180910390fd5b505050565b611cba8383611d93565b611cce611cc56111fc565b5f8585856116f0565b505050565b5f8073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614158015611d8a57508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480611d4b5750611d4a8484610f88565b5b80611d8957508273ffffffffffffffffffffffffffffffffffffffff16611d71836111c3565b73ffffffffffffffffffffffffffffffffffffffff16145b5b90509392505050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603611e03575f6040517f64a0ae92000000000000000000000000000000000000000000000000000000008152600401611dfa9190612091565b60405180910390fd5b5f611e0f83835f611215565b90505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614611e81575f6040517f73c6ac6e000000000000000000000000000000000000000000000000000000008152600401611e789190612091565b60405180910390fd5b505050565b5f604051905090565b5f80fd5b5f80fd5b5f7fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b611ecb81611e97565b8114611ed5575f80fd5b50565b5f81359050611ee681611ec2565b92915050565b5f60208284031215611f0157611f00611e8f565b5b5f611f0e84828501611ed8565b91505092915050565b5f8115159050919050565b611f2b81611f17565b82525050565b5f602082019050611f445f830184611f22565b92915050565b5f81519050919050565b5f82825260208201905092915050565b5f5b83811015611f81578082015181840152602081019050611f66565b5f8484015250505050565b5f601f19601f8301169050919050565b5f611fa682611f4a565b611fb08185611f54565b9350611fc0818560208601611f64565b611fc981611f8c565b840191505092915050565b5f6020820190508181035f830152611fec8184611f9c565b905092915050565b5f819050919050565b61200681611ff4565b8114612010575f80fd5b50565b5f8135905061202181611ffd565b92915050565b5f6020828403121561203c5761203b611e8f565b5b5f61204984828501612013565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61207b82612052565b9050919050565b61208b81612071565b82525050565b5f6020820190506120a45f830184612082565b92915050565b6120b381612071565b81146120bd575f80fd5b50565b5f813590506120ce816120aa565b92915050565b5f80604083850312156120ea576120e9611e8f565b5b5f6120f7858286016120c0565b925050602061210885828601612013565b9150509250929050565b5f805f6060848603121561212957612128611e8f565b5b5f612136868287016120c0565b9350506020612147868287016120c0565b925050604061215886828701612013565b9150509250925092565b61216b81611ff4565b82525050565b5f6020820190506121845f830184612162565b92915050565b5f80fd5b5f80fd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6121c882611f8c565b810181811067ffffffffffffffff821117156121e7576121e6612192565b5b80604052505050565b5f6121f9611e86565b905061220582826121bf565b919050565b5f67ffffffffffffffff82111561222457612223612192565b5b61222d82611f8c565b9050602081019050919050565b828183375f83830152505050565b5f61225a6122558461220a565b6121f0565b9050828152602081018484840111156122765761227561218e565b5b61228184828561223a565b509392505050565b5f82601f83011261229d5761229c61218a565b5b81356122ad848260208601612248565b91505092915050565b5f602082840312156122cb576122ca611e8f565b5b5f82013567ffffffffffffffff8111156122e8576122e7611e93565b5b6122f484828501612289565b91505092915050565b5f6020828403121561231257612311611e8f565b5b5f61231f848285016120c0565b91505092915050565b61233181611f17565b811461233b575f80fd5b50565b5f8135905061234c81612328565b92915050565b5f806040838503121561236857612367611e8f565b5b5f612375858286016120c0565b92505060206123868582860161233e565b9150509250929050565b5f67ffffffffffffffff8211156123aa576123a9612192565b5b6123b382611f8c565b9050602081019050919050565b5f6123d26123cd84612390565b6121f0565b9050828152602081018484840111156123ee576123ed61218e565b5b6123f984828561223a565b509392505050565b5f82601f8301126124155761241461218a565b5b81356124258482602086016123c0565b91505092915050565b5f805f806080858703121561244657612445611e8f565b5b5f612453878288016120c0565b9450506020612464878288016120c0565b935050604061247587828801612013565b925050606085013567ffffffffffffffff81111561249657612495611e93565b5b6124a287828801612401565b91505092959194509250565b5f80604083850312156124c4576124c3611e8f565b5b5f6124d1858286016120c0565b92505060206124e2858286016120c0565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061253057607f821691505b602082108103612543576125426124ec565b5b50919050565b5f60608201905061255c5f830186612082565b6125696020830185612162565b6125766040830184612082565b949350505050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026125da7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8261259f565b6125e4868361259f565b95508019841693508086168417925050509392505050565b5f819050919050565b5f61261f61261a61261584611ff4565b6125fc565b611ff4565b9050919050565b5f819050919050565b61263883612605565b61264c61264482612626565b8484546125ab565b825550505050565b5f90565b612660612654565b61266b81848461262f565b505050565b5b8181101561268e576126835f82612658565b600181019050612671565b5050565b601f8211156126d3576126a48161257e565b6126ad84612590565b810160208510156126bc578190505b6126d06126c885612590565b830182612670565b50505b505050565b5f82821c905092915050565b5f6126f35f19846008026126d8565b1980831691505092915050565b5f61270b83836126e4565b9150826002028217905092915050565b61272482611f4a565b67ffffffffffffffff81111561273d5761273c612192565b5b6127478254612519565b612752828285612692565b5f60209050601f831160018114612783575f8415612771578287015190505b61277b8582612700565b8655506127e2565b601f1984166127918661257e565b5f5b828110156127b857848901518255600182019150602085019450602081019050612793565b868310156127d557848901516127d1601f8916826126e4565b8355505b6001600288020188555050505b505050505050565b7f416d6f756e74206d757374206265203e203000000000000000000000000000005f82015250565b5f61281e601283611f54565b9150612829826127ea565b602082019050919050565b5f6020820190508181035f83015261284b81612812565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61288982611ff4565b915061289483611ff4565b92508282019050808211156128ac576128ab612852565b5b92915050565b7f416c6c204e465473206d696e74656400000000000000000000000000000000005f82015250565b5f6128e6600f83611f54565b91506128f1826128b2565b602082019050919050565b5f6020820190508181035f830152612913816128da565b9050919050565b7f4d696e74206c696d6974206578636565646564000000000000000000000000005f82015250565b5f61294e601383611f54565b91506129598261291a565b602082019050919050565b5f6020820190508181035f83015261297b81612942565b9050919050565b5f61298c82611ff4565b915061299783611ff4565b92508282026129a581611ff4565b915082820484148315176129bc576129bb612852565b5b5092915050565b5f6060820190506129d65f830186612082565b6129e36020830185612082565b6129f06040830184612162565b949350505050565b5f81519050612a0681612328565b92915050565b5f60208284031215612a2157612a20611e8f565b5b5f612a2e848285016129f8565b91505092915050565b7f5472616e7366657220746f2063726561746f72206661696c65640000000000005f82015250565b5f612a6b601a83611f54565b9150612a7682612a37565b602082019050919050565b5f6020820190508181035f830152612a9881612a5f565b9050919050565b7f5472616e7366657220746f20706c6174666f726d206661696c656400000000005f82015250565b5f612ad3601b83611f54565b9150612ade82612a9f565b602082019050919050565b5f6020820190508181035f830152612b0081612ac7565b9050919050565b5f612b1182611ff4565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203612b4357612b42612852565b5b600182019050919050565b7f496e76616c696420746f6b656e496400000000000000000000000000000000005f82015250565b5f612b82600f83611f54565b9150612b8d82612b4e565b602082019050919050565b5f6020820190508181035f830152612baf81612b76565b9050919050565b5f81905092915050565b5f8154612bcc81612519565b612bd68186612bb6565b9450600182165f8114612bf05760018114612c0557612c37565b60ff1983168652811515820286019350612c37565b612c0e8561257e565b5f5b83811015612c2f57815481890152600182019150602081019050612c10565b838801955050505b50505092915050565b5f612c4a82611f4a565b612c548185612bb6565b9350612c64818560208601611f64565b80840191505092915050565b7f2e6a736f6e0000000000000000000000000000000000000000000000000000005f82015250565b5f612ca4600583612bb6565b9150612caf82612c70565b600582019050919050565b5f612cc58285612bc0565b9150612cd18284612c40565b9150612cdc82612c98565b91508190509392505050565b5f81519050919050565b5f82825260208201905092915050565b5f612d0c82612ce8565b612d168185612cf2565b9350612d26818560208601611f64565b612d2f81611f8c565b840191505092915050565b5f608082019050612d4d5f830187612082565b612d5a6020830186612082565b612d676040830185612162565b8181036060830152612d798184612d02565b905095945050505050565b5f81519050612d9281611ec2565b92915050565b5f60208284031215612dad57612dac611e8f565b5b5f612dba84828501612d84565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b5f612dfa82611ff4565b9150612e0583611ff4565b925082612e1557612e14612dc3565b5b828204905092915050565b5f612e2a82611ff4565b9150612e3583611ff4565b9250828203905081811115612e4d57612e4c612852565b5b92915050565b5f612e5d82611ff4565b9150612e6883611ff4565b925082612e7857612e77612dc3565b5b828206905092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b5f604082019050612ec35f830185612082565b612ed06020830184612162565b939250505056fea2646970667358221220bdf6835e950e19332ecd9942c7a3127d4ba56a94afbdd765a97d60ee73a5b50e64736f6c63430008140033"; 
    
    // <-- your full bytecode string here

    collectionImageInput.addEventListener("change", e => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onloadend = () => {
          previewImg.src = reader.result;
          previewImg.classList.remove("hidden");
        };
        reader.readAsDataURL(file);
        fileName.innerText = file.name;
      }
    });

    generateAI.onclick = async () => {
      const prompt = document.getElementById("aiPrompt").value.trim();
      if (!prompt) return alert("Please enter a prompt.");
      status.innerText = "🎨 Generating artwork...";

      try {
        const response = await fetch("https://api.deepai.org/api/text2img", {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded",
            "Api-Key": "72d569f8-2328-42d5-accd-9183bca84b27"
          },
          body: new URLSearchParams({ text: prompt })
        });

        const data = await response.json();
        if (data.output_url) {
          const response2 = await fetch(data.output_url);
          const blob = await response2.blob();
          const reader = new FileReader();
          reader.onloadend = () => {
            previewImg.src = reader.result;
            previewImg.classList.remove("hidden");
            fileName.innerText = "AI Art: " + prompt;
          };
          reader.readAsDataURL(blob);
        } else {
          status.innerText = "❌ No image returned. Try another prompt.";
        }
      } catch (err) {
        console.error("AI Error:", err);
        status.innerText = "❌ Generation failed. See console.";
      }
    };

    async function uploadImageToCloudinary(base64Image) {
  const formData = new FormData();
  formData.append("file", base64Image);
  formData.append("upload_preset", "ano_unsigned"); // your unsigned preset

  const response = await fetch("https://api.cloudinary.com/v1_1/djbpbdsod/image/upload", {
    method: "POST",
    body: formData,
  });

  const data = await response.json();
  if (data.secure_url) return data.secure_url;
  else throw new Error("Upload failed");
}



    deployBtn.onclick = async () => {
  if (!connected || !signer) return alert("Connect wallet first.");

  const name = document.getElementById("projectName").value.trim();
  const symbol = document.getElementById("projectSymbol").value.trim();
  const description = document.getElementById("projectDescription").value.trim();
  const price = document.getElementById("priceInANO").value.trim();
  const maxSupply = document.getElementById("maxSupply").value.trim();
  const maxPerWallet = document.getElementById("maxPerWallet").value.trim();

  if (
    !name || !symbol || !description || !price || !maxSupply || !maxPerWallet ||
    !previewImg.src || previewImg.classList.contains("hidden")
  ) {
    alert("❌ Fill all fields and provide a valid image.");
    return;
  }

  status.innerText = "🚀 Uploading image to Cloudinary...";

  try {
    const imageUrl = await uploadImageToCloudinary(previewImg.src);
    console.log("✅ Image uploaded:", imageUrl);
    status.innerText = "✅ Image uploaded. Deploying contract...";
    await continueDeployment(imageUrl);
  } catch (err) {
    console.error("❌ Upload failed:", err);
    alert("Image upload failed. Check console.");
    status.innerText = "❌ Upload failed.";
  }
};


async function continueDeployment(image) {
  try {
    const name = document.getElementById("projectName").value.trim();
    const symbol = document.getElementById("projectSymbol").value.trim();
    const description = document.getElementById("projectDescription").value.trim();
    const price = document.getElementById("priceInANO").value.trim();
    const maxSupply = parseInt(document.getElementById("maxSupply").value.trim());
    const maxPerWallet = document.getElementById("maxPerWallet").value.trim();
    const owner = await signer.getAddress();

    const factory = new ethers.ContractFactory(contractABI, bytecode, signer);
    const platformFee = ethers.utils.parseUnits("1", 18); // Platform fee

    const contract = await factory.deploy(
      name,
      symbol,
      "0x1D6AfCff12be74b402692430d9be949943A875b0", // ANO token
      owner,
      description,
      ethers.utils.parseUnits(price, 18),
      platformFee,
      maxSupply,
      parseInt(maxPerWallet),
      "0x5df54016f9096DaF75C4465F1Dd91C7EEA259f2b" // platform fee receiver
    );

    await contract.deployed();
    console.log("✅ Contract deployed at:", contract.address);

    // 🔁 Upload metadata for each token
    for (let tokenId = 0; tokenId < maxSupply; tokenId++) {
      const metadata = {
        name: `${name} #${tokenId + 1}`,
        description,
        image
      };

      const metadataBlob = new Blob([JSON.stringify(metadata)], { type: "application/json" });
      const metadataForm = new FormData();
      metadataForm.append("file", metadataBlob, `${tokenId}.json`);
      metadataForm.append("upload_preset", "ano_unsigned");
      metadataForm.append("public_id", `${tokenId}`);
      metadataForm.append("folder", "metadata"); // ✅ Uploads to metadata/ folder

      const res = await fetch("https://api.cloudinary.com/v1_1/djbpbdsod/raw/upload", {
        method: "POST",
        body: metadataForm
      });

      const result = await res.json();
      if (!result.secure_url) throw new Error(`❌ Upload failed for token ${tokenId}`);
      console.log(`🧾 Metadata #${tokenId} → ${result.secure_url}`);
    }

    // 🔗 Set base URI on-chain
    await contract.setBaseURI("https://res.cloudinary.com/djbpbdsod/raw/upload/metadata/");
    console.log("📦 Base URI set!");

    // 💾 Store in Firestore
    const { db, firestoreHelpers } = window;
    const { addDoc, collection, serverTimestamp } = firestoreHelpers;

    await addDoc(collection(db, "collections"), {
      name,
      symbol,
      address: contract.address,
      description,
      image,
      price: ethers.utils.parseUnits(price, 18).toString(),
      supply: maxSupply,
      maxPerWallet,
      owner,
      createdAt: serverTimestamp()
    });

    status.innerText = `✅ Deployed! Redirecting...`;
    setTimeout(() => {
      window.location.href = `mint.html?address=${contract.address}`;
    }, 1500);
  } catch (err) {
    console.error("❌ Deployment error:", err);
    status.innerText = "❌ Deployment failed. See console.";
  }
}






    window.addEventListener("DOMContentLoaded", async () => {
      if (window.ethereum && localStorage.getItem("ano_wallet")) {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        try {
          const accounts = await provider.send("eth_accounts", []);
          if (accounts.length > 0) {
            signer = provider.getSigner();
            connected = true;
            const connectBtn = document.getElementById("connectWalletBtn");
            connectBtn.innerText = `👤 ${accounts[0].slice(0, 6)}...${accounts[0].slice(-4)}`;
            connectBtn.disabled = true;
          }
        } catch (err) {
          console.error("Silent wallet check failed:", err);
        }
      }
    });

    const links = document.querySelectorAll("nav a[href]");
    links.forEach(link => {
      if (window.location.href.includes(link.getAttribute("href"))) {
        link.classList.add("text-amber-400");
        link.classList.remove("text-white");
      }
    });
  </script>

  <script>
    window.addEventListener("wallet-restored", e => {
      const { address, signer: restoredSigner, provider } = e.detail;
      window.signer = restoredSigner;
      window.provider = provider;
      window.walletAddress = address;
      signer = restoredSigner;
      connected = true;

      const connectBtn = document.getElementById("connectWalletBtn");
      connectBtn.innerText = `👤 ${address.slice(0, 6)}...${address.slice(-4)}`;
      connectBtn.disabled = true;

      console.log("✅ Wallet Restored", address);
    });
  </script>

</body>
</html>
